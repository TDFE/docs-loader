{"version":3,"sources":["../../src/utils/source-loader.js"],"names":["module","exports","sourceLoader","content","cacheable","webpackRemainingChain","getRemainingRequest","split","fullPath","length","filename","relative","process","cwd","callback","async","boss","queue","transformers","err","result"],"mappings":";;AAOA;;;;AACA;;;;AACA;;;;AACA;;;;AAVA;;;;;;;AAYAA,OAAOC,OAAP,GAAiB,SAASC,YAAT,CAAsBC,OAAtB,EAA+B;AAC9C,MAAI,KAAKC,SAAT,EAAoB;AAClB,SAAKA,SAAL;AACD;AACD,MAAMC,wBAAwB,sBAAYC,mBAAZ,CAAgC,IAAhC,EAAsCC,KAAtC,CAA4C,GAA5C,CAA9B;AACA,MAAMC,WAAWH,sBAAsBA,sBAAsBI,MAAtB,GAA+B,CAArD,CAAjB;AACA,MAAMC,WAAW,eAAKC,QAAL,CAAcC,QAAQC,GAAR,EAAd,EAA6BL,QAA7B,CAAjB;;AAEA,MAAMM,YAAW,KAAKC,KAAL,EAAjB;AACAC,OAAKC,KAAL,CAAW;AACTP,sBADS;AAETP,oBAFS;AAGTe,kBAAc,4BAHL;AAITJ,YAJS,oBAIAK,GAJA,EAIKC,MAJL,EAIa;AACpBN,gBAASK,GAAT,wBAAkCC,MAAlC;AACD;AANQ,GAAX;AAQD,CAjBD","file":"source-loader.js","sourcesContent":["/**\n * @Author: Zhengfeng.Yao <yzf>\n * @Date:   2017-06-07 19:13:28\n * @Last modified by:   yzf\n * @Last modified time: 2017-06-07 19:13:29\n */\n\nimport path from 'path';\nimport scheduler from './scheduler';\nimport loaderUtils from 'loader-utils';\nimport { getTransformers } from './tool';\n\nmodule.exports = function sourceLoader(content) {\n  if (this.cacheable) {\n    this.cacheable();\n  }\n  const webpackRemainingChain = loaderUtils.getRemainingRequest(this).split('!');\n  const fullPath = webpackRemainingChain[webpackRemainingChain.length - 1];\n  const filename = path.relative(process.cwd(), fullPath);\n\n  const callback = this.async();\n  boss.queue({\n    filename,\n    content,\n    transformers: getTransformers(),\n    callback(err, result) {\n      callback(err, `module.exports = ${result};`);\n    },\n  });\n}\n"]}